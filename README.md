# Book API
This RESTful API allows clients to register, update, delete, and retrieve information about books.

## Features
- Create a new book
- Update an existing book's details
- Delete a book from the system
- Retrieve a list of books
- Retrieve details of a specific book
- Input validation
- Paging
- Sorting
- Searching
- Filtering
- Logging

## Technology Used
- ASP.NET Core Web API
- Entity Framework Core
- MySQL 
- Git
- Nlog (logging)

## Installation
1. Clone the repository
2. Open the project in Visual Studio
3. Install any necessary NuGet packages
4. Create a MySQL database and insert fake data using the sql script in `DatabaseMigration` directory
5. Update the database connection string, userid and password in the `appsettings.json` file
6. change the log file directory in `nlog.config`
7. Run the application
8. The API will be available at `https://localhost:7030/api/book`.

## Design Pattern
This project follows the repository pattern to ensure maintainability and scalability.

## API Endpoints

### Create a Book

* **POST** `api/book`
* Example Request: 
```json
{
    "name": "Pride and Prejudice",
    "author": "Jane Austeeeeen",
    "category_Id": "72a17923-04a6-494b-9d3c-2c0cb161434c",
}
``` 
* Example Response:
```json
{
    "$id": "1",
    "id": "08dcad94-3cc1-4458-8f66-146b367bd147",
    "name": "Pride and Prejudice",
    "author": "Jane Austeeeeen",
    "category_Id": "72a17923-04a6-494b-9d3c-2c0cb161434c",
    "category": null
}
```

Note: `$id` is generated by json to identified json object. It will not be recorded in database.

### Get a Book by ID

* **GET** `api/book/{id}`
* Example Request: `GET api/book/08dcad48-bd22-4a80-8215-67153f73ec8c`
* Example Response: 
```json
{
    "$id": "1",
    "id": "2c1541b8-3a93-47bf-9ab7-fbe807bdf68d",
    "name": "The Great Gatsby",
    "author": "F. Scott Fitzgerald",
    "category_Id": "289ac3de-1cf3-4a0d-8795-f6e9b48b9ddb",
    "category": {
        "$id": "2",
        "id": "289ac3de-1cf3-4a0d-8795-f6e9b48b9ddb",
        "name": "Fiction"
    }
}
``` 

### Update a Book

* **PUT** `api/book/{id}`
* Example Request:
```json
{
  "id": "08dcad48-bd22-4a80-8215-67153f73ec8c",
  "name": "Pride and Prejudiceeeeeeeeeeee",
  "author": "Jane Austennnnnnnnnnnn",
  "category_Id": "72a17923-04a6-494b-9d3c-2c0cb161434c"
}
``` 

### Delete a Book

* **DELETE** `api/book/{id}`
* Example Request: `DELETE api/book/08dcad48-bd22-4a80-8215-67153f73ec8c`

### Get All Books

* **GET** `api/book`
* Example Request: `GET api/book`

### Get Books with Paging

* **GET** `api/book?pageNumber={pageNumber}&pageSize={pageSize}`
* Query Parameters:
        + `pageNumber`: The page number to retrieve
        + `pageSize`: The number of books to retrieve per page
* Example Request: `GET api/book?pageNumber=1&pageSize=2`
* Additional Response Header: 
```json
X-Pagination: {
    "CurrentPage":1,
    "TotalPages":2,
    "PageSize":10,
    "TotalCount":14,
    "HasPrevious":false,
    "HasNext":true,
    "OrderByAscending":true,
}
```

### Get Books by Author

* **GET** `api/book?author={author}`
* Example Request: `GET api/book?author=Jane Austen`

### Get Books by Category

* **GET** `api/book?category_id={category_id}`
* Example Request: `GET api/book?category_id=289ac3de-1cf3-4a0d-8795-f6e9b48b9ddb`

### Search Books

* **GET** `api/book?searchterm={searchterm}`
* Example Request: `GET api/book?searchterm=the`

### Sort Books

* **GET** `api/book?orderBy={orderByQueryString}`
* Example Request: `GET api/book?orderBy=name,category_id desc`

